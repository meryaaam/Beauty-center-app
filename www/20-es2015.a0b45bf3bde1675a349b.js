(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{y8fh:function(l,n,e){"use strict";e.r(n);var i=e("8Y7J");class t{}var u=e("pMnS"),o=e("oBZk"),r=e("ZZ/e"),a=e("SVse"),s=e("mrSG"),c=e("Pn9U"),b=e("cdBk"),h=e("gRf5"),m=e("Yttj");class p{constructor(l,n,e,i,t,u){this.navCtrl=l,this.transfer=n,this.camera=e,this.actionSheet=i,this.imagePicker=t,this.webview=u,this.myPictures=[],this.imgUploaded=!1,this.numImgUpload=0}ngOnInit(){}getImage(){this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY}).then(l=>{this.imageURI=l},l=>{console.log(l)})}uploadFile(){this.transfer.create().upload(this.imageURI,"http://192.168.0.7:8080/api/uploadImage",{fileKey:"ionicfile",fileName:"ionicfile",chunkedMode:!1,mimeType:"image/jpeg",headers:{}}).then(l=>{console.log(l+" Uploaded Successfully"),this.imageFileName="http://192.168.0.7:8080/static/images/ionicfile.jpg"},l=>{console.log(l)})}action(){return s.b(this,void 0,void 0,(function*(){(yield this.actionSheet.create({header:"S\xe9lectionner la source",buttons:[{text:"Galerie",icon:"images",handler:()=>s.b(this,void 0,void 0,(function*(){console.log("Galerie");const l=yield this.galerie(4);for(let n=0;n<l.length;n++){const e=l[n];console.log("element de pictures",e);const i=this.webview.convertFileSrc(e);this.myPictures.push(i)}}))},{text:"Camera",icon:"camera",handler:()=>{console.log("Camera"),this.getCam().then(l=>{console.log("image",l);const n=this.webview.convertFileSrc(l);this.myPictures.push(n)})}},{text:"Annuler",icon:"close",role:"cancel"}]})).present()}))}getCam(){return s.b(this,void 0,void 0,(function*(){return this.camera.getPicture({sourceType:1,destinationType:this.camera.DestinationType.FILE_URI,quality:100,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE})}))}galerie(l){return s.b(this,void 0,void 0,(function*(){return this.imagePicker.getPictures({maximumImagesCount:l,outputType:0,quality:100})}))}uploadImages(l){return s.b(this,void 0,void 0,(function*(){for(let n=0;n<l.length;n++){const e=l[n];let i=e.substr(e.lastIndexOf("/")+1);console.log("elementName",i);let t=this.transfer.create();const u="http://localhost:8038/api/products/Containers/photos/upload";console.log("url",u);let o={fileKey:"Shopping",fileName:i,chunkedMode:!1,mimeType:"image/jpeg",headers:{}};if(!this.imgUploaded){const l=yield t.upload(e,u,o),n=JSON.parse(l.response)._id;console.log("id",n),this.product.pictures.push(n),this.numImgUpload+=1}this.numImgUpload===l.length&&(this.imgUploaded=!0)}return!0}))}delete(l){this.myPictures.splice(l,1)}}var d=i.qb({encapsulation:0,styles:[[""]],data:{}});function g(l){return i.Mb(0,[(l()(),i.sb(0,0,null,null,10,"ion-item",[],null,null,null,o.ib,o.u)),i.rb(1,49152,null,0,r.I,[i.h,i.k,i.x],null,null),(l()(),i.sb(2,0,null,0,3,"ion-thumbnail",[["slot","start"]],null,null,null,o.xb,o.K)),i.rb(3,49152,null,0,r.Ab,[i.h,i.k,i.x],null,null),(l()(),i.sb(4,0,null,0,1,"ion-img",[],null,null,null,o.fb,o.s)),i.rb(5,49152,null,0,r.E,[i.h,i.k,i.x],{src:[0,"src"]},null),(l()(),i.sb(6,0,null,0,4,"ion-button",[["color","danger"],["size","small"],["slot","end"]],null,[[null,"click"]],(function(l,n,e){var i=!0;return"click"===n&&(i=!1!==l.component.delete(l.context.index)&&i),i}),o.Q,o.d)),i.rb(7,49152,null,0,r.l,[i.h,i.k,i.x],{color:[0,"color"],size:[1,"size"]},null),(l()(),i.sb(8,0,null,0,1,"ion-icon",[["name","close-circle"]],null,null,null,o.eb,o.r)),i.rb(9,49152,null,0,r.D,[i.h,i.k,i.x],{name:[0,"name"]},null),(l()(),i.Kb(-1,0,["\xa0 Retirer "]))],(function(l,n){l(n,5,0,n.context.$implicit),l(n,7,0,"danger","small"),l(n,9,0,"close-circle")}),null)}function f(l){return i.Mb(0,[(l()(),i.sb(0,0,null,null,23,"ion-content",[["padding",""]],null,null,null,o.Y,o.l)),i.rb(1,49152,null,0,r.v,[i.h,i.k,i.x],null,null),i.rb(2,16384,null,0,r.e,[i.k],null,null),(l()(),i.sb(3,0,null,0,4,"ion-item-divider",[["color","primary"]],null,null,null,o.hb,o.v)),i.rb(4,49152,null,0,r.J,[i.h,i.k,i.x],{color:[0,"color"]},null),(l()(),i.sb(5,0,null,0,1,"ion-icon",[["name","images"]],null,null,null,o.eb,o.r)),i.rb(6,49152,null,0,r.D,[i.h,i.k,i.x],{name:[0,"name"]},null),(l()(),i.Kb(-1,0,[" Images du produit\n"])),(l()(),i.sb(8,0,null,0,15,"ion-grid",[],null,null,null,o.cb,o.p)),i.rb(9,49152,null,0,r.B,[i.h,i.k,i.x],null,null),(l()(),i.sb(10,0,null,0,3,"ion-row",[],null,null,null,o.qb,o.D)),i.rb(11,49152,null,0,r.kb,[i.h,i.k,i.x],null,null),(l()(),i.hb(16777216,null,0,1,null,g)),i.rb(13,278528,null,0,a.k,[i.N,i.K,i.q],{ngForOf:[0,"ngForOf"]},null),(l()(),i.sb(14,0,null,0,9,"ion-row",[],null,null,null,o.qb,o.D)),i.rb(15,49152,null,0,r.kb,[i.h,i.k,i.x],null,null),(l()(),i.sb(16,0,null,0,7,"ion-col",[],null,null,null,o.X,o.k)),i.rb(17,49152,null,0,r.u,[i.h,i.k,i.x],null,null),(l()(),i.sb(18,0,null,0,5,"ion-fab",[["horizontal","center"]],null,[[null,"click"]],(function(l,n,e){var i=!0;return"click"===n&&(i=!1!==l.component.action()&&i),i}),o.ab,o.m)),i.rb(19,49152,null,0,r.x,[i.h,i.k,i.x],{horizontal:[0,"horizontal"]},null),(l()(),i.sb(20,0,null,0,3,"ion-fab-button",[],null,null,null,o.Z,o.n)),i.rb(21,49152,null,0,r.y,[i.h,i.k,i.x],null,null),(l()(),i.sb(22,0,null,0,1,"ion-icon",[["name","camera"]],null,null,null,o.eb,o.r)),i.rb(23,49152,null,0,r.D,[i.h,i.k,i.x],{name:[0,"name"]},null)],(function(l,n){var e=n.component;l(n,4,0,"primary"),l(n,6,0,"images"),l(n,13,0,e.myPictures),l(n,19,0,"center"),l(n,23,0,"camera")}),null)}function y(l){return i.Mb(0,[(l()(),i.sb(0,0,null,null,1,"app-profile",[],null,null,null,f,d)),i.rb(1,114688,null,0,p,[r.Jb,h.a,c.a,r.a,b.a,m.a],null,null)],(function(l,n){l(n,1,0)}),null)}var k=i.ob("app-profile",p,y,{},{},[]),v=e("s7LF"),x=e("iInd");class C{}e.d(n,"ProfilePageModuleNgFactory",(function(){return I}));var I=i.pb(t,[],(function(l){return i.Bb([i.Cb(512,i.j,i.ab,[[8,[u.a,k]],[3,i.j],i.v]),i.Cb(4608,a.n,a.m,[i.s,[2,a.x]]),i.Cb(4608,v.q,v.q,[]),i.Cb(4608,r.c,r.c,[i.x,i.g]),i.Cb(4608,r.Ib,r.Ib,[r.c,i.j,i.p]),i.Cb(4608,r.Lb,r.Lb,[r.c,i.j,i.p]),i.Cb(1073742336,a.c,a.c,[]),i.Cb(1073742336,v.p,v.p,[]),i.Cb(1073742336,v.d,v.d,[]),i.Cb(1073742336,r.Fb,r.Fb,[]),i.Cb(1073742336,x.p,x.p,[[2,x.u],[2,x.m]]),i.Cb(1073742336,C,C,[]),i.Cb(1073742336,t,t,[]),i.Cb(1024,x.k,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);